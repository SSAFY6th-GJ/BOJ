import sys
input = sys.stdin.readline

N,M = map(int, input().split())

arr = [list(map(int, input().split())) for _ in range(N)]

answer = 0

case = [
    # 1
    [[0, 0], [0, 1], [0, 2], [0, 3]],
    [[0, 0], [1, 0], [2, 0], [3, 0]],
    # 2
    [[0, 0], [0, 1], [1, 0], [1, 1]],
    # 3
    [[0, 0], [1, 0], [2, 0], [2, 1]],
    [[0, 0], [1, 0], [0, 1], [0, 2]],
    [[0, 0], [0, 1], [1, 1], [2, 1]],
    [[0, 0], [0, 1], [0, 2], [-1, 2]],
    [[0, 0], [0, 1], [-1, 1], [-2, 1]],
    [[0, 0], [1, 0], [1, 1], [1, 2]],
    [[0, 0], [0, 1], [1, 0], [2, 0]],
    [[0, 0], [0, 1], [0, 2], [1, 2]],
    # 4
    [[0, 0], [1, 0], [1, 1], [2, 1]],
    [[0, 0], [0, 1], [-1, 1], [-1, 2]],
    [[0, 0], [0, 1], [-1, 1], [1, 0]],
    [[0, 0], [0, 1], [1, 1], [1, 2]],
    # 5
    [[0, 0], [0, 1], [0, 2], [1, 1]],
    [[0, 0], [-1, 1], [0, 1], [1, 1]],
    [[0, 0], [0, 1], [0, 2], [-1, 1]],
    [[0, 0], [1, 0], [2, 0], [1, 1]]
]

def check(x, y):
    global answer
    for d in range(19):
        cnt = 0
        for i in range(4):
            if 0 <= x+case[d][i][0] < N and 0 <= y+case[d][i][1] < M:
                cnt += arr[x+case[d][i][0]][y+case[d][i][1]]
            else:
                break

        answer = max(answer, cnt)

for i in range(N):
    for j in range(M):
        check(i, j)

print(answer)
